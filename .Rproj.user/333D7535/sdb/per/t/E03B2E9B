{
    "collab_server" : "",
    "contents" : "########################################################################################\n#                                    # # #                                             #\n#This file is used to create a static visualization of the data for presentation       #\n#code written by Lionel R. Hertzog and Nadja Simmons\n\n#Updated: 17.08.2016\n########################################################################################\n\n# Installing the development version of the leaflet package from github\nlibrary(devtools)\ninstall_github(\"rstudio/leaflet\")\n####\n\nlibrary(leaflet)\nlibrary(plyr)\nlibrary(dplyr)\nlibrary(viridis) # to make color palette\n\n#color palette for the bus line or use busline_colors\ncol_line <- colorFactor(viridis(length(bus_line_list)),as.character(1:length(bus_line_list)))\nopacity_bus_lines <- 0.3\n\nnames(bus_line_list) <- c(1:length(bus_line_list))\n\n# create icons with the leaflet package\nicon_uni<-makeAwesomeIcon(icon=\"university\",library=\"fa\",markerColor=\"red\",iconColor=\"white\")\nicon_bus<-makeAwesomeIcon(icon=\"bus\",library = \"fa\",markerColor=\"darkblue\",iconColor=\"white\")\nicons<-awesomeIconList(\n  bar_pub_bistro=makeAwesomeIcon(icon = \"beer\",library = \"fa\",markerColor = \"orange\",iconColor = \"green\"),\n  restaurant=makeAwesomeIcon(icon = \"cutlery\",library = \"fa\",markerColor = \"white\",iconColor = \"darkred\"),\n  supermarket=makeAwesomeIcon(icon=\"shopping-cart\",library = \"glyphicon\",markerColor = \"cadetblue\",iconColor = \"#c3f971\"),\n  pharmacy=makeAwesomeIcon(icon=\"medkit\",library=\"fa\",markerColor = \"white\",iconColor=\"red\"),\n  accomodation=makeAwesomeIcon(icon=\"building-o\",library=\"fa\",markerColor = \"white\",iconColor = \"yellow\"),\n  bakery=makeAwesomeIcon(icon=\"grain\",library=\"glyphicon\",markerColor = \"white\",iconColor=\"orange\"),\n  cafe=makeAwesomeIcon(icon=\"coffee\",library=\"fa\",markerColor = \"cadetblue\",iconColor=\"orange\"),\n  imbiss=makeAwesomeIcon(icon=\"pizza\",library=\"ion\",markerColor = \"white\",iconColor=\"pink\"),\n  taxi=makeAwesomeIcon(icon=\"taxi\",library=\"fa\",markerColor = \"darkblue\")\n)\n\n# create a static map\n\nleaflet() %>%\n  setView(lng=8.774149, lat=50.810685,zoom = 14)%>%\n  addTiles(\"https://api.mapbox.com/styles/v1/mapbox/streets-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibGlvbmVsNjgiLCJhIjoiY2lyOHVtY2ZqMDAycmlsbHd3cXF4azhzdiJ9.FHJtGBW1bhjCr-JLnC4brw\",\n          option=tileOptions(minZoom=13,maxZoom=18)) %>%\n  addAwesomeMarkers(data=busstop_new,lng=~Longitude,lat=~Latitude,popup=~Tag)%>%\n  addAwesomeMarkers(lng=8.774149, lat=50.810685, popup=\"The conference venue\",icon=icon_uni)%>%\n  addAwesomeMarkers(data=busstops_nearest,lng=~Longitude,lat=~Latitude,label=~BusStopName,icon=icon_bus)%>%\n  addAwesomeMarkers(data=stores,lng=~Longitude,lat=~Latitude,icon=~icons[Group],label = ~Labels,labelOptions = list(opacity=5)) %>% \n  \n  addPolylines(data=bus_line_list[[1]],stroke=TRUE,color=col_line(1),noClip=FALSE,opacity = opacity_bus_lines)%>%\n  addPolylines(data=bus_line_list[[2]],stroke=TRUE,color=col_line(2),noClip=FALSE,opacity = opacity_bus_lines)%>%\n  addPolylines(data=bus_line_list[[3]],stroke=TRUE,color=col_line(3),noClip=FALSE,opacity = opacity_bus_lines)%>%\n  addPolylines(data=bus_line_list[[4]],stroke=TRUE,color=col_line(4),noClip=FALSE,opacity = opacity_bus_lines)%>%\n  addPolylines(data=bus_line_list[[5]],stroke=TRUE,color=col_line(5),noClip=FALSE,opacity = opacity_bus_lines)%>%\n  addPolylines(data=bus_line_list[[6]],stroke=TRUE,color=col_line(6),noClip=FALSE,opacity = opacity_bus_lines)%>%\n  addPolylines(data=bus_line_list[[7]],stroke=TRUE,color=col_line(7),noClip=FALSE,opacity = opacity_bus_lines)%>%\n  addPolylines(data=bus_line_list[[8]],stroke=TRUE,color=col_line(8),noClip=FALSE,opacity = opacity_bus_lines)%>%\n  addPolylines(data=bus_line_list[[9]],stroke=TRUE,color=col_line(9),noClip=FALSE,opacity = opacity_bus_lines)%>%\n  addPolylines(data=bus_line_list[[10]],stroke=TRUE,color=col_line(10),noClip=FALSE,opacity = opacity_bus_lines)\n  \n\n# neither a loop nor l_ply worked as a more elegant solution to plotting the bus lines\n  # l_ply(bus_line_list,function(x) addPolylines(data=x,stroke=TRUE,color=col_line(as.numeric(names(x))),noClip=FALSE))\n  \n# TO DO:\n\n# Select a part of the map as an example area\n# Show connecting lines between bus stops and stores\n# Check if there are also round markers, or use color-coded points for stores\n# Alternative: make the markers much smaller\n\n# Does not know the function \"addAwesomeMarkers\"  \n # addAwesomeMarkers(data=busstop_new,lng=~Longitude,lat=~Latitude,popup=~Tag) %>%\n # addAwesomeMarkers(lng=8.774149, lat=50.810685, popup=\"The conference venue\",icon=icon_uni)%>%\n # addAwesomeMarkers(data=bus,lng=~Longitude,lat=~Latitude,label=~BusStopName,icon=icon_bus)%>%\n # addAwesomeMarkers(data=stores,lng=~Longitude,lat=~Latitude,icon=~icons[Group],label = ~Labels,labelOptions = list(opacity=5))\n",
    "created" : 1471448801502.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2545887884",
    "id" : "E03B2E9B",
    "lastKnownWriteTime" : 1471513068,
    "last_content_update" : 1471513068579,
    "path" : "C:/Users/Nadja/8-Freising/05_Tagungen_Workshops/Gf√ñ-Tagung 2016/Vizualization_Award/Static_map.R",
    "project_path" : "Static_map.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}